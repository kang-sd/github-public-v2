<!-- index.html - GitHub Public -->
<!-- ğŸ”“ ê³µê°œ: HTML êµ¬ì¡° + CSS + ì…ë ¥í¼ -->
<!-- ğŸ”’ ë¹„ê³µê°œ: include ë¶€ë¶„ì€ Firebaseì—ì„œ ë™ì  ë¡œë“œ -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì‚¬ì£¼íŒ”ì</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- âœ… CSSëŠ” ì™¸ë¶€ íŒŒì¼ë¡œ ë¶„ë¦¬ -->
  <link rel="stylesheet" href="styles.css">
  
</head>
<body>
  <div class="main-container">

    <!-- âœ… ì…ë ¥ í¼ ì˜ì—­ - ì—¬ê¸°ëŠ” ê³µê°œ -->
    <div id="form-section">
      <!-- block1.htmlê³¼ ì…ë ¥í¼ ë‚´ìš©ì´ ë“¤ì–´ê°ˆ ìë¦¬ -->
      <div id="block1-container"></div>
      <div id="form-container"></div>
    </div>

    <!-- âœ… ê²°ê³¼ í‘œì‹œ ì˜ì—­ - ë¹ˆ ì»¨í…Œì´ë„ˆ -->
    <div id="result-section" style="display:none; margin-top:30px;">
      <!-- Firebaseì—ì„œ block2, block3 ë™ì  ë¡œë“œ -->
      <div id="block2-container"></div>
      <div id="block3-container"></div>
    </div>

    <!-- âœ… í•˜ë‹¨ ì•ˆë‚´ë¬¸êµ¬ - ê³µê°œ -->
    <div id="footer-message" style="margin-top:50px; font-size:13px; color:#444; text-align:center; line-height:1.8; 
         border-top:2px solid #1976d2; padding:18px; background:#f9fbff; border-radius:8px;">
      
      <p style="font-size:14px; font-weight:bold; color:#1976d2; margin-bottom:8px;">
        ğŸ“Œ ì´ìš© ì•ˆë‚´
      </p>

      <p style="margin:6px 0;">
        ë³¸ ì‚¬ì£¼ ì‚¬ì£¼íŒ”ì í”„ë¡œê·¸ë¨ì€ <b style="color:#000;">kangseoungdo</b>ì— ì €ì‘ê¶Œì´ ìˆìœ¼ë©°,<br>
        <span style="color:#d32f2f; font-weight:600;">ìƒì—…ì  ì‚¬ìš© ë° ë¬´ë‹¨ ë°°í¬ëŠ” ê¸ˆì§€</span>ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
      </p>

      <p style="margin:6px 0;">
        ì…ë ¥ëœ ê°œì¸ì •ë³´(ì´ë¦„, ìƒë…„ì›”ì¼, ì¶œìƒì§€ ë“±)ëŠ” ì˜¤ì§ <b>í•´ì„ ëª©ì </b>ìœ¼ë¡œë§Œ ì‚¬ìš©ë˜ë©°,<br>
        ë‹¤ë¥¸ ìš©ë„ë¡œ ì €ì¥Â·í™œìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
      </p>

      <p style="margin:6px 0; font-style:italic; color:#666;">
        âš ï¸ ë³¸ í•´ì„ ê²°ê³¼ëŠ” ì°¸ê³ ìš©ìœ¼ë¡œ ì œê³µë˜ë©°, ë²•ì  íš¨ë ¥ì´ë‚˜ ì ˆëŒ€ì  ì§„ì‹¤ì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
        ëª¨ë“  íŒë‹¨ê³¼ ì±…ì„ì€ ì´ìš©ì ë³¸ì¸ì—ê²Œ ìˆìŠµë‹ˆë‹¤.
      </p>

      <p style="margin:6px 0;">
        ë³¸ í”„ë¡œê·¸ë¨ì€ PC, ëª¨ë°”ì¼, íƒœë¸”ë¦¿ ë“± <b>ì–´ëŠ í™˜ê²½ì—ì„œë“  ì‚¬ìš© ê°€ëŠ¥</b>í•©ë‹ˆë‹¤.<br>
        ë‹¤ë§Œ, í™”ë©´ í¬ê¸°ì™€ ê°€ë…ì„±ì„ ê³ ë ¤í•˜ì—¬ <b style="color:#1976d2;">íƒœë¸”ë¦¿ ì‚¬ìš©ì„ ê¶Œì¥</b>í•©ë‹ˆë‹¤.
      </p>

      <p style="margin:6px 0; font-size:13px; color:#555;">
        âœ‰ï¸ ì´ìš© ì¤‘ ë¶ˆí¸ì‚¬í•­ì€ 
        <a href="mailto:seoungdo@gmail.com" style="color:#1976d2; text-decoration:none; font-weight:500;">
          seoungdo@gmail.com
        </a> ìœ¼ë¡œ ë¬¸ì˜í•´ ì£¼ì„¸ìš”.
      </p>
    </div>

  </div>

  <!-- âœ… Firebase ì—°ë™ ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    // Firebase Functions API ì„¤ì •
    const FIREBASE_API = 'https://us-central1-saju-app.cloudfunctions.net';

    // í˜ì´ì§€ ë¡œë“œ ì‹œ í…œí”Œë¦¿ ë™ì  ë¡œë“œ
    window.addEventListener('DOMContentLoaded', async () => {
      try {
        // 1. block1 ë¡œë“œ (ì†Œê°œ)
        const block1 = await fetch(`${FIREBASE_API}/getTemplate?name=block1`);
        document.getElementById('block1-container').innerHTML = await block1.text();

        // 2. ì…ë ¥ í¼ ë¡œë“œ
        const formHTML = await fetch(`${FIREBASE_API}/getTemplate?name=input-form`);
        document.getElementById('form-container').innerHTML = await formHTML.text();

        // 3. ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ (script_ui, script_block*)
        await loadScripts();

      } catch (error) {
        console.error('í…œí”Œë¦¿ ë¡œë“œ ì‹¤íŒ¨:', error);
        alert('í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }
    });

    // ìŠ¤í¬ë¦½íŠ¸ ë™ì  ë¡œë“œ í•¨ìˆ˜
    async function loadScripts() {
      const scripts = [
        'script_ui',
        'script_block3',
        'script_block3_1',
        'script_block3_2',
        'script_block3_4',
        'script_block4',
        'script_block4_Daewoon',
        'script_block4_sewoon',
        'script_block6',
        'script_block7'
      ];

      for (const scriptName of scripts) {
        const response = await fetch(`${FIREBASE_API}/getTemplate?name=${scriptName}`);
        const scriptHTML = await response.text();
        
        // <script> íƒœê·¸ ì¶”ì¶œ ë° ì‹¤í–‰
        const div = document.createElement('div');
        div.innerHTML = scriptHTML;
        const scriptTags = div.querySelectorAll('script');
        
        scriptTags.forEach(oldScript => {
          const newScript = document.createElement('script');
          if (oldScript.src) {
            newScript.src = oldScript.src;
          } else {
            newScript.textContent = oldScript.textContent;
          }
          document.body.appendChild(newScript);
        });
      }
    }

    // ì‚¬ì£¼ ê³„ì‚° í•¨ìˆ˜ (Firebase Functions í˜¸ì¶œ)
    async function calculateSaju(formData) {
      const response = await fetch(`${FIREBASE_API}/calculateSaju`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(formData)
      });
      
      return await response.json();
    }
  </script>

</body>
</html>
